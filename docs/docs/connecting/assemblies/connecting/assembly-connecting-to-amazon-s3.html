<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Connecting to Amazon Simple Storage Service (S3) :: Docs</title>
    <link rel="canonical" href="https://pwright.github.io/syndesis/docs/connecting/assemblies/connecting/assembly-connecting-to-amazon-s3.html">
    <meta name="generator" content="Antora 2.3.1">
    <link rel="stylesheet" href="../../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://pwright.github.io/syndesis">Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
         
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="is-primary" href="#"></a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../index.html"> Home</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../tutorials/master.html">Syndesis Sample Integration Tutorials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../master.html">Connecting Syndesis to Applications and Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../customizing/master.html">Developing OpenAPI Documents and Extensions to Customize Syndesis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrating-applications/master.html">Integrating Applications with Syndesis</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Docs</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">Docs</a></li>
    <li><a href="assembly-connecting-to-amazon-s3.html">Connecting to Amazon Simple Storage Service (S3)</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/pwright/repos/doc-test/syndesis/antora/modules/ROOT/pages/connecting/assemblies/connecting/assembly-connecting-to-amazon-s3.adoc"></a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Connecting to Amazon Simple Storage Service (S3)</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>An integration can retrieve data from an Amazon S3 bucket or copy data into
an Amazon S3 bucket. To do this, create an Amazon S3
connection and then add that connection to an integration flow.
For details, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#create-s3-connection_s3">Creating Amazon S3 connections</a></p>
</li>
<li>
<p><a href="#adding-s3-connection-start_s3">Obtaining data from Amazon S3 to trigger integration execution</a></p>
</li>
<li>
<p><a href="#adding-s3-connection-finish_s3">Adding data to Amazon S3 to finish an integration</a></p>
</li>
<li>
<p><a href="#adding-s3-connection-middle_s3">Adding data to Amazon S3 in the middle of an integration</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-s3-connection_s3"><a class="anchor" href="#create-s3-connection_s3"></a>Creating Amazon S3 connections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must create an Amazon S3 connection before you can add an
Amazon S3 connection to an integration.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>AWS access key. See <a href="{LinkSyndesisConnectorGuide}#obtaining-aws-credentials_aws">Obtaining AWS credentials</a>.</p>
</li>
<li>
<p>If the bucket that you want the connection to access already exists,
you must know:</p>
<div class="ulist">
<ul>
<li>
<p>The region that the bucket is in.</p>
</li>
<li>
<p>The bucket&#8217;s name or Amazon Resource Name (ARN).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In {prodname}, in the left panel, click <strong>Connections</strong> to
display any available connections.</p>
</li>
<li>
<p>Click <strong>Create Connection</strong> to display
{prodname} connectors.</p>
</li>
<li>
<p>Click the <strong>Amazon S3</strong> connector.</p>
</li>
<li>
<p>In the <strong>Access Key</strong> field, enter an Amazon access key ID that is
part of a user access key in the AWS account that manages
the bucket that you want the connection to access.</p>
<div class="paragraph">
<p>If the bucket that you want the connection to
access does not already exist then when {prodname} tries to start running the
integration, it uses the AWS account associated with this access key to
create the bucket. However, if the bucket already exists in some other
AWS account, then the connection cannot create the bucket and the
integration cannot start.</p>
</div>
</li>
<li>
<p>In the <strong>Secret Key</strong> field, enter the Amazon secret access key for the
Amazon access key ID that you specified.</p>
</li>
<li>
<p>In the <strong>Region</strong> field, select the AWS region in which the bucket resides.
If the connection creates the bucket, then it creates it in the
selected region.</p>
</li>
<li>
<p>In the <strong>Bucket Name or Amazon Resource Name</strong> field, enter the name of
the bucket that you want this connection to access or enter the bucket&#8217;s ARN.</p>
<div class="paragraph">
<p>If the bucket you specify does not yet exist then the connection
tries to create a bucket with the name that you specify.
Because S3 allows a bucket to be used as a URL that can be accessed publicly,
the bucket name that you specify must be globally unique. Also, it must meet
<a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-s3-bucket-naming-requirements.html">S3 bucket naming requirements</a>.</p>
</div>
</li>
<li>
<p>Click <strong>Validate</strong>. {prodname} immediately tries to validate the
connection and displays a message that indicates whether or not
validation is successful. If validation fails, revise the configuration
details as needed and try again.</p>
</li>
<li>
<p>When validation is successful, click <strong>Next</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter your choice of a name that
helps you distinguish this connection from any other connections.
For example, enter <code>Obtain S3 Data</code>.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, optionally enter any information that
is helpful to know about this connection. For example,
enter <code><strong>Sample S3 connection
that obtains data from a northeast bucket.</strong></code></p>
</li>
<li>
<p>Click <strong>Save</strong> to see that the connection you
created is now available. If you entered the example name, you would
see that <strong>Obtain S3 Data</strong> appears as a connection that you can
choose to add to an integration.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-s3-connection-start_s3"><a class="anchor" href="#adding-s3-connection-start_s3"></a>Obtaining data from Amazon S3 to trigger integration execution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To start an integration by obtaining data from an Amazon S3 bucket,
add an Amazon S3 connection as a simple integration&#8217;s start connection.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>You created an Amazon S3 connection.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the {prodname} panel on the left, click <strong>Integrations</strong>.</p>
</li>
<li>
<p>Click <strong>Create Integration</strong>.</p>
</li>
<li>
<p>On the <strong>Choose a connection</strong> page, click the Amazon S3 connection that
you want to use to start the integration.</p>
</li>
<li>
<p>On the <strong>Choose an action</strong> page, select the action that you
want the connection to perform:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Get Object</strong> obtains a file from the bucket that the connection
accesses. In the <strong>File Name</strong> field, enter the name of the file that you want
to obtain. If the specified file is not in the bucket, it is a runtime error.</p>
</li>
<li>
<p><strong>Poll an Amazon S3 Bucket</strong> periodically obtains files from the bucket that the
connection accesses. To configure this action:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the <strong>Delay</strong> field, accept the default of 500 milliseconds as the time
that elapses between polls. Or, to specify a different polling interval,
enter a number and select its time unit.</p>
</li>
<li>
<p>In the <strong>Maximum Objects to Retrieve</strong> field, enter the largest number of files
that one poll operation can obtain. The default is 10.</p>
<div class="paragraph">
<p>To have no limit on the number of files that can be obtained, specify
<code>0</code> or a negative integer. When <strong>Maximum Objects to Retrieve</strong> is unlimited,
the poll action obtains all files in the bucket.</p>
</div>
<div class="paragraph">
<p>If the bucket contains more than the specified maximum number of files
then the action obtains the files that were most recently
modified or created.</p>
</div>
</li>
<li>
<p>In the <strong>Prefix</strong> field, optionally specify a regular expression
that evaluates to a string. If you specify a
prefix then this action retrieves a file
only when its name starts with that string.</p>
</li>
<li>
<p>Indicate whether you want to
<strong>Obtain files and then delete them from the bucket</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>After you configure the action, click <strong>Next</strong> to specify the action&#8217;s output type.</p>
</li>
<li>
<p>In the <strong>Select Type</strong> field, if the data type does not need to be known,
accept <strong>Type specification not required</strong>
and click <strong>Next</strong>. You do not need to follow the rest of these
instructions.</p>
<div class="paragraph">
<p>However, a structured data type is recommended. For example, if you want
to map the connection output in a data mapper step then you must specify
the data type. The data mapper cannot display fields for unstructured data.</p>
</div>
<div class="paragraph">
<p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JSON schema</strong> is a document that describes the structure of JSON data.
The document&#8217;s media type is <code>application/schema+json</code>.</p>
</li>
<li>
<p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s
media type is <code>application/json</code>.</p>
</li>
<li>
<p><strong>XML schema</strong> is a document that describes the structure of XML data.
The document&#8217;s file extension is <code>.xsd</code>.</p>
</li>
<li>
<p><strong>XML instance</strong> is a document that contains XML data. The
document&#8217;s file extension is <code>.xml</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>Definition</strong> input box, paste a definition that conforms to the
schema type you selected.
For example, if you select <strong>JSON schema</strong> then you would paste the content of
a JSON schema file, which has a media type of <code>application/schema+json</code>.</p>
</li>
<li>
<p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the
data type. For example, if you are specifying a JSON schema for
vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p>
<div class="paragraph">
<p>You will see this data type name when you are creating
or editing an integration that uses the connection
for which you are specifying this type. {prodname} displays the type name
in the integration visualization and in the data mapper.</p>
</div>
</li>
<li>
<p>In the <strong>Data Type Description</strong> field, provide information that helps you
distinguish this type. This description appears in the data mapper when
you hover over the step that processes this type.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>The integration now has a start connection and {prodname} is prompting
you to choose the finish connection.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-s3-connection-finish_s3"><a class="anchor" href="#adding-s3-connection-finish_s3"></a>Adding data to Amazon S3 to finish an integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To finish an integration by copying data to Amazon S3,
add an Amazon S3 connection as a simple integration&#8217;s finish connection.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You created an Amazon S3 connection.</p>
</li>
<li>
<p>You are creating or editing a simple integration and {prodname} is prompting you
to choose a finish connection.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the <strong>Choose a  connection</strong> page, click the Amazon S3 connection that
you want to use to finish the integration.</p>
</li>
<li>
<p>Select the action that you want the connection to perform:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Copy Object</strong> adds one or more objects to the bucket.</p>
<div class="paragraph">
<p>To add one file to the bucket, you can enter its name in the <strong>File Name</strong> field.</p>
</div>
<div class="paragraph">
<p>To add multiple files to the bucket, do not specify a file name.
In this case, the action adds all objects that it
obtains from the previous integration step(s).</p>
</div>
<div class="paragraph">
<p>If you used the poll action
to obtain multiple files and you specify a file name then the <strong>Copy Object</strong>
action adds only the last file that was received from the poll action.</p>
</div>
</li>
<li>
<p><strong>Delete Object</strong> deletes an object from the bucket. In the
<strong>File Name</strong> field, specify the name of the object that you want to delete.
If the specified file is not in the bucket, the integration continues
with no error.</p>
</li>
</ul>
</div>
</li>
<li>
<p>After you configure the chosen action, click <strong>Next</strong> to specify
the action&#8217;s input type.</p>
</li>
<li>
<p>In the <strong>Select Type</strong> field, if the data type does not need to be known,
accept <strong>Type specification not required</strong>
and click <strong>Next</strong>. You do not need to follow the rest of these
instructions.</p>
<div class="paragraph">
<p>However, a structured data type is recommended. For example, if you want
to map the connection input in a data mapper step then you must specify
the data type. The data mapper cannot display fields for unstructured data.</p>
</div>
<div class="paragraph">
<p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JSON schema</strong> is a document that describes the structure of JSON data.
The document&#8217;s media type is <code>application/schema+json</code>.</p>
</li>
<li>
<p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s
media type is <code>application/json</code>.</p>
</li>
<li>
<p><strong>XML schema</strong> is a document that describes the structure of XML data.
The document&#8217;s file extension is <code>.xsd</code>.</p>
</li>
<li>
<p><strong>XML instance</strong> is a document that contains XML data. The
document&#8217;s file extension is <code>.xml</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>Definition</strong> input box, paste a definition that conforms to the
schema type you selected.
For example, if you select <strong>JSON schema</strong> then you would paste the content of
a JSON schema file, which has a media type of <code>application/schema+json</code>.</p>
</li>
<li>
<p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the
data type. For example, if you are specifying a JSON schema for
vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p>
<div class="paragraph">
<p>You will see this data type name when you are creating
or editing an integration that uses the connection
for which you are specifying this type. {prodname} displays the type name
in the integration visualization and in the data mapper.</p>
</div>
</li>
<li>
<p>In the <strong>Data Type Description</strong> field, provide information that helps you
distinguish this type. This description appears in the data mapper when
you hover over the step that processes this type.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>The connection appears at the end of the integration visualization.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-s3-connection-middle_s3"><a class="anchor" href="#adding-s3-connection-middle_s3"></a>Adding data to Amazon S3 in the middle of an integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the middle of an integration, to add data to Amazon S3,
add an Amazon S3 connection to the middle of a flow.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You created an Amazon S3 connection.</p>
</li>
<li>
<p>You are creating or editing a flow and {prodname} is prompting you
to add to the integration.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the flow visualization, click the plus sign where you want
to add an Amazon S3 connection.</p>
</li>
<li>
<p>Click the Amazon S3 connection that you want to use in the middle
of a flow.</p>
</li>
<li>
<p>Select the action that you want the connection to perform:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Copy Object</strong> adds one or more objects to the bucket.</p>
<div class="paragraph">
<p>To add one file to the bucket, you can enter its name in the <strong>File Name</strong> field.</p>
</div>
<div class="paragraph">
<p>To add multiple files to the bucket, do not specify a file name.
In this case, the action adds all objects that it
obtains from the previous integration step(s).</p>
</div>
<div class="paragraph">
<p>If you used the poll action
to obtain multiple files and you specify a file name then the <strong>Copy Object</strong>
action adds only the last file that was received from the poll action.</p>
</div>
</li>
<li>
<p><strong>Delete Object</strong> deletes an object from the bucket. In the
<strong>File Name</strong> field, specify the name of the object that you want to delete.
If the specified file is not in the bucket, the integration continues
with no error.</p>
</li>
</ul>
</div>
</li>
<li>
<p>After you configure the chosen action, click <strong>Next</strong> to specify
the action&#8217;s input type.</p>
</li>
<li>
<p>In the <strong>Select Type</strong> field, if the data type does not need to be known,
accept <strong>Type specification not required</strong>
and click <strong>Next</strong>. You do not need to follow the rest of these
instructions.</p>
<div class="paragraph">
<p>However, a structured data type is recommended. For example, if you want
to map the connection input in a data mapper step then you must specify
the data type. The data mapper cannot display fields for unstructured data.</p>
</div>
<div class="paragraph">
<p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JSON schema</strong> is a document that describes the structure of JSON data.
The document&#8217;s media type is <code>application/schema+json</code>.</p>
</li>
<li>
<p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s
media type is <code>application/json</code>.</p>
</li>
<li>
<p><strong>XML schema</strong> is a document that describes the structure of XML data.
The document&#8217;s file extension is <code>.xsd</code>.</p>
</li>
<li>
<p><strong>XML instance</strong> is a document that contains XML data. The
document&#8217;s file extension is <code>.xml</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>Definition</strong> input box, paste a definition that conforms to the
schema type you selected.
For example, if you select <strong>JSON schema</strong> then you would paste the content of
a JSON schema file, which has a media type of <code>application/schema+json</code>.</p>
</li>
<li>
<p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the
data type. For example, if you are specifying a JSON schema for
vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p>
<div class="paragraph">
<p>You will see this data type name when you are creating
or editing an integration that uses the connection
for which you are specifying this type. {prodname} displays the type name
in the integration visualization and in the data mapper.</p>
</div>
</li>
<li>
<p>In the <strong>Data Type Description</strong> field, provide information that helps you
distinguish this type. This description appears in the data mapper when
you hover over the step that processes this type.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>The connection appears in the flow visualization
where you added it.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
