<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Connecting to an FTP or SFTP server :: Docs</title>
    <meta name="generator" content="Antora 2.3.1">
    <link rel="stylesheet" href="../../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
         
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="is-primary" href="#"></a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../index.html"> Home</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Docs</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">Docs</a></li>
    <li><a href="assembly-connecting-to-ftp.html">Connecting to an FTP or SFTP server</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/pwright/repos/doc-test/syndesis/antora/modules/ROOT/pages/connecting/assemblies/connecting/assembly-connecting-to-ftp.adoc"></a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Connecting to an FTP or SFTP server</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In an integration, you can connect to an FTP or SFTP server to download or
upload files. To do this, create an FTP or SFTP connection and then add
it to an integration flow. The following topics provide details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-ftp-connections_ftp">Creating an FTP or SFTP connection</a></p>
</li>
<li>
<p><a href="#adding-ftp-start-connection_ftp">Obtaining files from an FTP or SFTP server</a></p>
</li>
<li>
<p><a href="#adding-ftp-finish-middle-connection_ftp">Uploading files to an FTP or SFTP server</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-ftp-connections_ftp"><a class="anchor" href="#creating-ftp-connections_ftp"></a>Creating an FTP or SFTP connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In an integration, to download or upload files from/to an FTP or SFTP server,
create a connection to that FTP or SFTP server. You can add the same
connection to any number of integrations.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>You must know the host name of the server you want to connect to.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In {prodname}, in the left panel, click <strong>Connections</strong> to
display any available connections.</p>
</li>
<li>
<p>Click <strong>Create Connection</strong> to display
{prodname} connectors.</p>
</li>
<li>
<p>To create a connection that uses
File Transfer Protocol, click the <strong>FTP</strong> connector.</p>
<div class="paragraph">
<p>Or, to create a connection
that uses Secure File Transfer Protocol,
click the <strong>SFTP</strong> connector.</p>
</div>
</li>
<li>
<p>Configure the connection.</p>
<div class="ulist">
<ul>
<li>
<p>For an FTP connection:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Host</strong> is the only parameter that you must
specify. Enter the host name of the server that you want to connect to.
For example, if the name of your FTP host is <code>FTP.WEST</code>, then you would
enter exactly that, <code>FTP.WEST</code>. Do not specify the protocol, for example,
you should not specify something like this: <code><a href="ftp://FTP.WEST" class="bare">ftp://FTP.WEST</a></code>.</p>
</li>
<li>
<p><strong>Port</strong> is required and has a default value of <code>21</code>. This is the
port that the FTP server is listening on.</p>
</li>
<li>
<p>All other parameters are either not required or have default values.
The defaults are suitable for most integrations. Descriptions of these
parameters are after this procedure.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For an SFTP connection, there must be values for these parameters:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Host</strong> is the host name of the SFTP server that you
want to connect to. For example, if the name of your SFTP host
is <code>SFTP.EAST</code>, then you would
enter exactly that, <code>SFTP.EAST</code>. Do not specify the protocol, for example,
you should not specify something like this: <code>sftp://SFTP.EAST</code>.</p>
</li>
<li>
<p><strong>Port</strong> has a default of <code>22</code>. This is the port that the SFTP server
is listening on.</p>
</li>
<li>
<p><strong>User name</strong> of the account that you want to
use to access the SFTP server.</p>
</li>
<li>
<p><strong>Password</strong> that is associated with that user name.</p>
</li>
<li>
<p>All other parameters have default values. The defaults are suitable
for most integrations. Descriptions of these
parameters are after this procedure.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Validate</strong>. {prodname} immediately tries to validate the
connection and displays a message that indicates whether or not
validation is successful. If validation fails, revise the configuration
details as needed and try again.</p>
</li>
<li>
<p>When validation is successful, click <strong>Next</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, enter your choice of a name that
helps you distinguish this connection from any other connections.
For example, enter <code><strong>XLight FTP Server</strong></code>.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, optionally enter any information that
is helpful to know about this connection.</p>
</li>
<li>
<p>Click <strong>Save</strong> to see that the connection you
created is now available. If you entered the example name, you would
see that <strong>XLight FTP Server</strong> appears as a connection that you can
choose to add to an integration.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Descriptions of other parameters</div>
<ul>
<li>
<p><strong>Connect timeout</strong> defaults to <strong>10000</strong> milliseconds and
indicates a maximum wait of 10 seconds to establish
the connection. If 10 seconds elapse without a connection then
{prodname} waits for the number of milliseconds defined by
<strong>Reconnect delay</strong> and then tries to reconnect.</p>
</li>
<li>
<p><strong>Reconnect delay</strong> defaults to <strong>1000</strong> milliseconds and indicates the
wait time before trying to reconnect again.</p>
</li>
<li>
<p><strong>Maximum reconnect attempts</strong> defaults to <strong>3</strong>. {prodname} tries as many as 3 times
to establish a connection.</p>
</li>
<li>
<p><strong>Binary file transfer mode</strong> is used by default.
Select <strong>No</strong> for ASCII transfer mode.</p>
</li>
<li>
<p><strong>Passive connection mode</strong> defaults to <strong>Yes</strong>, which is usually the preferred
mode. In passive mode, the client opens communication channels with the server
as a way to avoid firewall issues. If you select <strong>No</strong> then active mode is
used.</p>
</li>
<li>
<p><strong>Disconnect from the server after use</strong> defaults to <strong>No</strong>. The connection
remains established after it performs the action. Select <strong>Yes</strong>
if you want to disconnect from the server after the connection
performs the upload or download.</p>
</li>
<li>
<p><strong>Data timeout</strong> defaults to <strong>30000</strong> milliseconds and indicates the maximum
length of time that {prodname} waits for a reply.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-ftp-start-connection_ftp"><a class="anchor" href="#adding-ftp-start-connection_ftp"></a>Obtaining files from an FTP or SFTP server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To trigger integration execution when
an FTP or SFTP connection finds the file(s) you are interested in,
add an FTP or SFTP connection as an integration&#8217;s start
connection.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>You created an FTP or SFTP connection.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the {prodname} panel on the left, click <strong>Integrations</strong>.</p>
</li>
<li>
<p>Click <strong>Create Integration</strong>.</p>
</li>
<li>
<p>On the <strong>Choose a connection</strong> page, click the
FTP or SFTP connection that
you want to use to poll an FTP or SFTP server.</p>
</li>
<li>
<p>On the <strong>Choose an action</strong> page, select <strong>Download</strong>.</p>
</li>
<li>
<p>In the <strong>File name expression</strong> field, if you are interested in a single file,
then enter an
<a href="http://camel.apache.org/simple.html">Apache Camel Simple language</a>
expression that resolves to a file name. You cannot specify a regular
expression. The connection
polls (periodically checks) the server for this file and downloads it
when it is found. Leave this field blank if you want to download more
than one file.</p>
</li>
<li>
<p>In the <strong>FTP directory</strong> field, enter the absolute or relative path of
the server directory to
poll. The connection watches this directory for any content and downloads
all files when it finds any content.</p>
</li>
<li>
<p>In the <strong>Milliseconds before polling starts</strong> field, accept the default
of <strong>1000</strong> milliseconds or change the number of milliseconds.</p>
</li>
<li>
<p>In the <strong>Milliseconds before the next poll</strong> field, accept the default
of <strong>500</strong> milliseconds or change the number of milliseconds. This is the
interval between polls.</p>
</li>
<li>
<p>In the <strong>Delete after download</strong> field, accept the default of <strong>No</strong>
or select <strong>Yes</strong> to download the file(s) and then delete it(them) from the server.</p>
</li>
<li>
<p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p>
</li>
<li>
<p>In the <strong>Select Type</strong> field, if the data type does not need to be known,
accept <strong>Type specification not required</strong>
and click <strong>Next</strong>. You do not need to follow the rest of these
instructions.</p>
<div class="paragraph">
<p>However, a structured data type is recommended. For example, if you want
to map the connection output in a data mapper step then you must specify
the data type. The data mapper cannot display fields for unstructured data.</p>
</div>
<div class="paragraph">
<p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JSON schema</strong> is a document that describes the structure of JSON data.
The document&#8217;s media type is <code>application/schema+json</code>.</p>
</li>
<li>
<p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s
media type is <code>application/json</code>.</p>
</li>
<li>
<p><strong>XML schema</strong> is a document that describes the structure of XML data.
The document&#8217;s file extension is <code>.xsd</code>.</p>
</li>
<li>
<p><strong>XML instance</strong> is a document that contains XML data. The
document&#8217;s file extension is <code>.xml</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>Definition</strong> input box, paste a definition that conforms to the
schema type you selected.
For example, if you select <strong>JSON schema</strong> then you would paste the content of
a JSON schema file, which has a media type of <code>application/schema+json</code>.</p>
</li>
<li>
<p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the
data type. For example, if you are specifying a JSON schema for
vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p>
<div class="paragraph">
<p>You will see this data type name when you are creating
or editing an integration that uses the connection
for which you are specifying this type. {prodname} displays the type name
in the integration visualization and in the data mapper.</p>
</div>
</li>
<li>
<p>In the <strong>Data Type Description</strong> field, provide information that helps you
distinguish this type. This description appears in the data mapper when
you hover over the step that processes this type.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>The connection appears at the beginning of the integration visualization.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-ftp-finish-middle-connection_ftp"><a class="anchor" href="#adding-ftp-finish-middle-connection_ftp"></a>Uploading files to an FTP or SFTP server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In an integration, you can upload files to an FTP or SFTP server
in the middle of a flow or to finish a simple integration. To do this,
add an FTP or SFTP connection to the middle of a flow or as a simple
integration&#8217;s finish connection.</p>
</div>
<div class="ulist">
<div class="title">Prerequisite</div>
<ul>
<li>
<p>You created an FTP or SFTP connection.</p>
</li>
<li>
<p>You are creating or editing a flow and {prodname} is prompting you
to add to the integration. Or, {prodname} is prompting you to choose a finish connection.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the <strong>Add to Integration</strong> page, click the plus sign where you
want to add the connection. Skip this step if {prodname} is
prompting you to choose the finish connection.</p>
</li>
<li>
<p>Click the FTP or SFTP connection that you want to use
to upload files.</p>
</li>
<li>
<p>On the <strong>Choose an action</strong> page, select <strong>Upload</strong>.</p>
</li>
<li>
<p>In the <strong>File name expression</strong> field, if you want to upload only one
particular file, then enter an
<a href="http://camel.apache.org/simple.html">Apache Camel Simple language</a>
expression that resolves to a file name. This is the name of the
file that the action uploads to the server.
You cannot specify a regular expression. To upload more than one
file, leave this field blank.</p>
</li>
<li>
<p>In the <strong>FTP directory</strong> field, enter the absolute or relative name of a server directory.
If the <strong>File name expression</strong> field contains an expression,
then the connection stores the specified file in this directory. If the
<strong>File name expression</strong> field is blank, then the connection uploads to
this directory all files that were received from the previous step.</p>
</li>
<li>
<p>In the <strong>If file exists</strong> field, indicate the behavior when you are
uploading a file that has the same path and name as a file that is on
the server. Accept the default, <strong>Override</strong>, to overwrite
the file that is on the server with the file that you are uploading.
Or, select one of the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Append</strong> adds the content in the file being uploaded to the file
that is on the server.</p>
</li>
<li>
<p><strong>Fail</strong> throws <code>GenericFileOperationException</code>. The integration does
not enter an error state.</p>
</li>
<li>
<p><strong>Ignore</strong> does not upload the file. The integration continues running
under the assumption that everything is okay.</p>
</li>
<li>
<p><strong>Move</strong> renames one of the files.</p>
</li>
<li>
<p><strong>TryRename</strong> uploads the file with a temporary name and renames the
file to the desired name. This operation does not check for the
existence of a file with the desired name, which makes the operation
faster on most servers than when existence checks are done.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>Temporary file prefix while copying</strong> field, specify a string.
The connection prepends this string to the name of a file while it is
being uploaded.
This enables the connection to write to a temporary file on the
server and then rename that temporary file to have the correct name.
This is useful for reducing locks when uploading very large files.</p>
</li>
<li>
<p>In the <strong>Temporary file name while copying</strong> field, specify a string.
The connection renames a file being uploaded to have this name
while it is being uploaded.
This enables the connection to write to a temporary file on the
server and then rename that temporary file to have the correct name.
This is useful for reducing locks when uploading very large files.</p>
</li>
<li>
<p>Click <strong>Next</strong> to specify the action&#8217;s input type.</p>
</li>
<li>
<p>In the <strong>Select Type</strong> field, if the data type does not need to be known,
accept <strong>Type specification not required</strong>
and click <strong>Next</strong>. You do not need to follow the rest of these
instructions.</p>
<div class="paragraph">
<p>However, a structured data type is recommended. For example, if you want
to map the connection input in a data mapper step then you must specify
the data type. The data mapper cannot display fields for unstructured data.</p>
</div>
<div class="paragraph">
<p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JSON schema</strong> is a document that describes the structure of JSON data.
The document&#8217;s media type is <code>application/schema+json</code>.</p>
</li>
<li>
<p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s
media type is <code>application/json</code>.</p>
</li>
<li>
<p><strong>XML schema</strong> is a document that describes the structure of XML data.
The document&#8217;s file extension is <code>.xsd</code>.</p>
</li>
<li>
<p><strong>XML instance</strong> is a document that contains XML data. The
document&#8217;s file extension is <code>.xml</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>Definition</strong> input box, paste a definition that conforms to the
schema type you selected.
For example, if you select <strong>JSON schema</strong> then you would paste the content of
a JSON schema file, which has a media type of <code>application/schema+json</code>.</p>
</li>
<li>
<p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the
data type. For example, if you are specifying a JSON schema for
vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p>
<div class="paragraph">
<p>You will see this data type name when you are creating
or editing an integration that uses the connection
for which you are specifying this type. {prodname} displays the type name
in the integration visualization and in the data mapper.</p>
</div>
</li>
<li>
<p>In the <strong>Data Type Description</strong> field, provide information that helps you
distinguish this type. This description appears in the data mapper when
you hover over the step that processes this type.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>The connection appears in the integration visualization
where you added it.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
