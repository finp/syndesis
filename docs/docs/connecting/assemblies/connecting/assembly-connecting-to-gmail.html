<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Connecting to Gmail :: Docs</title>
    <link rel="canonical" href="https://pwright.github.io/syndesis/docs/connecting/assemblies/connecting/assembly-connecting-to-gmail.html">
    <meta name="generator" content="Antora 2.3.1">
    <link rel="stylesheet" href="../../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://pwright.github.io/syndesis">Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
         
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="is-primary" href="#"></a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../index.html"> Home</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../tutorials/master.html">Syndesis Sample Integration Tutorials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../master.html">Connecting Syndesis to Applications and Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../customizing/master.html">Developing OpenAPI Documents and Extensions to Customize Syndesis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrating-applications/master.html">Integrating Applications with Syndesis</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Docs</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">Docs</a></li>
    <li><a href="assembly-connecting-to-gmail.html">Connecting to Gmail</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/pwright/repos/doc-test/syndesis/antora/modules/ROOT/pages/connecting/assemblies/connecting/assembly-connecting-to-gmail.adoc"></a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Connecting to Gmail</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>To trigger execution of an integration when a particular Gmail
account receives an email, add a Gmail connection to a simple integration as its
start connection. In an integration, to send an email from a
particular Gmail account, do either of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a Gmail connection to the middle of a flow.</p>
</li>
<li>
<p>Add a Gmail connection to finish a simple integration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The general steps for connecting to Gmail in an integration are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="{LinkSyndesisConnectorGuide}#register-with-google_google">Registering {prodname} as a Google client application</a>.</p>
</li>
<li>
<p>Creating a Gmail connection. When you do this you choose the Gmail account that
the connection is authorized to access.</p>
</li>
<li>
<p>If your integration sends an email from a Gmail account,
decide how to populate an email to send.</p>
</li>
<li>
<p>Adding a Gmail connection to an integration flow.</p>
</li>
<li>
<p>For a Gmail connection that sends an email, optionally mapping integration
data to the email fields.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Information and instructions are in the following topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#create-gmail-connection_gmail">Creating a Gmail connection</a></p>
</li>
<li>
<p><a href="#alternatives-for-populating-email-to-send_gmail">Alternatives for populating email to send</a></p>
</li>
<li>
<p><a href="#add-gmail-connection-start_gmail">Triggering an integration when polling returns a Gmail message</a></p>
</li>
<li>
<p><a href="#add-gmail-connection-finish-middle_gmail">Sending an email from a Gmail account</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-gmail-connection_gmail"><a class="anchor" href="#create-gmail-connection_gmail"></a>Creating a Gmail connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you create a Gmail connection, you authorize the connection to access one
particular Gmail account. After you create a Gmail connection, you can
add it to multiple integrations.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You
<a href="{LinkSyndesisConnectorGuide}#register-with-google_google">registered {prodname} as a Google client application</a>
and enabled the Gmail API.</p>
</li>
<li>
<p>The {prodname} <strong>Settings</strong> page entry for Gmail has values for the client ID and client secret, which
you obtained by registering {prodname} as a Google client application.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In {prodname}, in the left panel, click <strong>Connections</strong> to
display any available connections.</p>
</li>
<li>
<p>Click <strong>Create Connection</strong> to display
the available connectors. A connector is a template that
you use to create one or more connections.</p>
</li>
<li>
<p>Click the <strong>Gmail</strong> connector.</p>
</li>
<li>
<p>In the <strong>Configure Connection</strong> page, click <strong>Connect Gmail</strong>,
which takes you to a <strong>Sign in with Gmail</strong> page.</p>
<div class="paragraph">
<p>If <strong>Connect Gmail</strong> does not display, your {prodname} environment
is not registered as a Google client application. See
<a href="{LinkSyndesisConnectorGuide}#register-with-google_google">Registering {prodname} as a Google client application</a>.
When you try to create a Gmail connection and your {prodname} environment
is not registered as a Google client application, then {prodname} displays
multiple fields that prompt for authorization information. While you can
create a Gmail connection by entering values in these fields,
it is not recommended.</p>
</div>
</li>
<li>
<p>In the page that is prompting you to sign in to Gmail,
enter the email address of the Google account that you want this connection to
access from {prodname} and click <strong>Next</strong>.</p>
</li>
<li>
<p>In response to <strong>openshiftapps.com wants to access your Google Account</strong>,
click <strong>Allow</strong> to return to {prodname}.</p>
</li>
<li>
<p>In the {prodname} <strong>Name</strong> field, enter your choice of a name that
helps you distinguish this connection from any other connections.
For example, enter <code><strong>Gmail Connect 1</strong></code>.</p>
</li>
<li>
<p>In the <strong>Description</strong> field, optionally enter any information that
is helpful to know about this connection. For example,
enter <code><strong>Sample Gmail connection
that uses jkim Gmail account credentials.</strong></code></p>
</li>
<li>
<p>Click <strong>Save</strong> to see that the connection you
created is now available. If you entered the example name, you would
see that <strong>Gmail Connect 1</strong> appears as a connection that you can
choose to add to an integration.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="alternatives-for-populating-email-to-send_gmail"><a class="anchor" href="#alternatives-for-populating-email-to-send_gmail"></a>Alternatives for populating email to send</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Gmail connection that finishes a simple integration or that is
in the middle of a flow sends an email from the Gmail
account that the connection is authorized to access. There are
several ways to populate the content of the email that the connection
sends. Before you add a Gmail connection that sends an email, consider
how you want to populate that email.</p>
</div>
<div class="paragraph">
<p>The alternatives for populating an email to send are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a data mapper step just before the Gmail connection that sends
an email. In this data mapper step, map data fields that are output
from previous steps to Gmail connection <strong>Send Email</strong> action fields.
The <strong>Send Email</strong> action fields are:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Email to</strong></p>
</li>
<li>
<p><strong>Email subject</strong></p>
</li>
<li>
<p><strong>Email text</strong></p>
</li>
<li>
<p><strong>Email cc</strong></p>
</li>
<li>
<p><strong>Email bcc</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you add a data mapper step then you can map one, some, or all
<strong>Send Email</strong> action fields.</p>
</div>
</li>
<li>
<p>When you add a Gmail connection to a flow, configure the
action by specifying values
in the <strong>Send Email</strong> action fields.
You can specify values in one, some, or all fields.</p>
</li>
<li>
<p>Use both a data mapper step and <strong>Send Email</strong> action configuration to
populate the fields. In other words, you can configure the
<strong>Send Email</strong> action by specifying one or more fields and
also add a data mapper step that populates other fields.</p>
<div class="paragraph">
<p>A value that you specify directly in a <strong>Send Email</strong> action
field has precedence over a value that is
mapped to the <strong>Send Email</strong> action field. In other words, suppose you populate
a <strong>Send Email</strong> field by specifying a value when you add the connection
and configure the action
and also by mapping a value to the same field. The value that you specify
in the action configuration always overrides the value that was mapped.
For example, suppose you specify
<code>people@redhat.com</code> in the <strong>Email to</strong> action field and you also map an
email field from a previous step to the Gmail <strong>Email to</strong> field. The integration
always uses <code>people@redhat.com</code> as the email address.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you add a Gmail connection that sends an email, all action configuration
parameters are optional. This is because you might choose to populate an
email entirely by mapping integration data to the <strong>Send Email</strong> action
fields. However, the presence of an email address
in the <strong>Email to</strong> field, either by action configuration specification or by
mapping, is required. Without an email address to send
the message to, {prodname} generates a runtime error and the integration
stops executing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-gmail-connection-start_gmail"><a class="anchor" href="#add-gmail-connection-start_gmail"></a>Triggering an integration when polling returns a Gmail message</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To trigger execution of an integration based on email received by
a particular Gmail account, add a Gmail connection as the start connection of
a simple integration. When the integration is running, the Gmail connection checks
this account for emails at intervals that you control.
When the connection finds an unread
email, it passes the email to the next step in the integration and, by default,
marks the email as <strong>read</strong>.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You created a Gmail connection that is authorized to access the Gmail
account that you want to obtain emails from.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the {prodname} panel on the left, click <strong>Integrations</strong>.</p>
</li>
<li>
<p>Click <strong>Create Integration</strong>.</p>
</li>
<li>
<p>On the <strong>Choose a connection</strong> page, click the Gmail connection that
you want to use to start the integration.</p>
</li>
<li>
<p>On the <strong>Choose an action</strong> page, select the <strong>Receive Email</strong> action.</p>
</li>
<li>
<p>To configure the <strong>Receive Email</strong> action:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the <strong>Delay</strong> field, accept the default of 30 seconds or
specify how often you want the integration to check for new email.</p>
</li>
<li>
<p>Leave the <strong>Labels</strong> field blank to obtain any unread email.
To obtain only certain emails,
specify a comma-separated list of labels that are used in the Gmail
account that the connection is accessing. By default, the integration obtains the
unread emails that have those labels.</p>
</li>
<li>
<p>Select <strong>Mark as read</strong> to ensure that the connection does not
return the same email twice. If <strong>Mark as read</strong> is not selected, the
connection returns emails that are in the account&#8217;s in box, whether or
not they were previously read. Or, if you specify one or more labels, then
the integration return emails that have those labels whether or not they
were already read.</p>
</li>
<li>
<p>In the <strong>Max Results</strong> field, accept the default of <strong>5</strong> or
indicate the maximum number of emails that the connection
can return for each poll. If the connection finds more than this number
of unread emails, then it returns the most recent <strong>Max Results</strong> emails.</p>
<div class="paragraph">
<p>When a Gmail connection returns more than one email, the integration
processes the emails as a batch. In other words, {prodname}
executes the integration once for the batch.</p>
</div>
</li>
<li>
<p>Click <strong>Next</strong> to add this Gmail connection as the start connection
in the integration. The connection appears as the
first step in the integration flow.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-gmail-connection-finish-middle_gmail"><a class="anchor" href="#add-gmail-connection-finish-middle_gmail"></a>Sending an email from a Gmail account</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In an integration, you can send an email from a Gmail account either
in the middle of a flow or to finish a simple integration.
To do this, add a Gmail connection to the middle of a flow or as
a simple integration&#8217;s finish connection.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You created a Gmail connection.</p>
</li>
<li>
<p>You are familiar with the
<a href="{LinkSyndesisConnectorGuide}#alternative-for-populating-email-to-send_gmail">alternatives for populating an email to send</a>
and you have a plan for populating such emails.</p>
</li>
<li>
<p>{prodname} is prompting you to add to the integration or to choose the finish
connection for a simple integration.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the <strong>Add to Integration</strong> page, click the plus sign where you
want to add the connection. Skip this step if {prodname} is
prompting you to choose the finish connection.</p>
</li>
<li>
<p>Click the Gmail connection that you want to use
to send an email.</p>
</li>
<li>
<p>On the <strong>Choose an action</strong> page, select <strong>Send Email</strong>.</p>
</li>
<li>
<p>On the <strong>Configure Send Email</strong> page, do one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>Leave all fields blank if you plan to add a data mapper step
just before this connection and you plan to map integration data
to the <strong>Send Email</strong> fields.</p>
</li>
<li>
<p>Enter information in one or more of the following <strong>Send Email</strong> fields.
Separate multiple email addresses with a comma.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Email To</strong></p>
</li>
<li>
<p><strong>Email Subject</strong></p>
</li>
<li>
<p><strong>Email Text</strong></p>
</li>
<li>
<p><strong>Email cc</strong></p>
</li>
<li>
<p><strong>Email bcc</strong></p>
</li>
</ol>
</div>
</li>
<li>
<p>Leave some fields blank and enter information in some fields.</p>
<div class="paragraph">
<p>If you plan to add a data mapper step just before this Gmail connection,
and you want to map integration data to some email fields, leave those fields
blank in the action configuration. Enter values in other action fields as needed.</p>
</div>
<div class="paragraph">
<p>A value that you specify in a <strong>Send Email</strong> action configuration field
has precedence over a value that is mapped from a previous step.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong> to add the connection to the flow.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Result</div>
<p>The connection appears in the integration flow where you added it.</p>
</div>
<div class="paragraph">
<div class="title">Next step</div>
<p>If you plan to add a data mapper step
before this connection, first add any other connections that you plan to add
to this flow. Then add the data mapper step.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
