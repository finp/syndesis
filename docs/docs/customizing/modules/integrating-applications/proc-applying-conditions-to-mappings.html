<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Applying conditions to mappings :: Docs</title>
    <meta name="generator" content="Antora 2.3.1">
    <link rel="stylesheet" href="../../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
         
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="is-primary" href="#"></a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../index.html"> Home</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Docs</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">Docs</a></li>
    <li><a href="proc-applying-conditions-to-mappings.html">Applying conditions to mappings</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/pwright/repos/doc-test/syndesis/antora/modules/ROOT/pages/customizing/modules/integrating-applications/proc-applying-conditions-to-mappings.adoc"></a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Applying conditions to mappings</h1>
<div class="paragraph">
<p>In some integrations, it is helpful to add conditional
processing to a mapping. For example, suppose that you are
mapping a source zip code field to a target zip code field.
If the source zip code field is empty, you might want to fill
the target field with <code>99999</code>. To do this, you would specify
an expression that tests the zip code source
field to determine if it is empty, and if it is empty,
inserts <code>99999</code> into the zip code target field.</p>
</div>
<div class="paragraph">
<p>The data mapper supports expressions that are similar to a Microsoft
Excel expressions, but does not support all Microsoft Excel expression
syntax. A conditional expression can refer to an individual field or to a field that is in a collection.</p>
</div>
<div class="paragraph">
<p>You can define zero or one condition for each mapping.</p>
</div>
<div class="paragraph">
<p>The following procedure gets you started with applying
conditions to mappings. As you work with mappings and
conditions, you can perform the required steps in the
order that is most convenient for you.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are mapping fields in a <strong>Data Mapper</strong> step.</p>
</li>
<li>
<p>You are familiar with Microsoft Excel expressions or
you have the conditional expression that you want to apply
to a mapping.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>If data types are not already visible, display them by clicking
<span class="image"><img src="../../../_images/images/tutorials/EditorSettings.png" alt="Editor settings"></span> and then
<strong>Show Types</strong>.</p>
<div class="paragraph">
<p>While this is not a requirement for specifying a condition, it is
helpful to see the data types.</p>
</div>
</li>
<li>
<p>Create the mapping that you want to apply a condition to, or
ensure that the currently selected mapping is the mapping that you
want to apply a condition to. For example, consider this mapping:</p>
<div class="paragraph">
<p><span class="image"><img src="../../../_images/images/integrating-applications/first-conditional-mapping.png" alt="lastName and firstName map to customerName"></span></p>
</div>
</li>
<li>
<p>In the upper right, click
<span class="image"><img src="../../../_images/images/integrating-applications/add-condition-to-mapping.png" alt="Add expression"></span> to
display the conditional expression input field.</p>
<div class="paragraph">
<p>In the expression field, the data mapper automatically displays
the names of the source fields in the current mapping. For example:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../_images/images/integrating-applications/first-conditional-mapping-expression.png" alt="lastName + firstName"></span></p>
</div>
<div class="paragraph">
<p>In the expression input field, the order of the source fields is the
order in which you selected them when you created the mapping.
This is important because the default mapping behavior is that the
data mapper concatenates the field values in this order to insert
the result in the target field. In this example, to create this
mapping, <code>lastName</code> was selected first and then <code>firstName</code> was selected.</p>
</div>
</li>
<li>
<p>Edit the expression input field to specify the conditional
expression that you want the data mapper to apply to the
mapping. Details about supported conditional expressions follow
this procedure.</p>
<div class="paragraph">
<p>As you specify the expression, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter <code>@</code> and start to enter the name of a field.
The data mapper displays a list of the fields that match
what you entered. Select the field that you want to
specify in the expression.</p>
</li>
<li>
<p>Drag a field from the mapping canvas into the expression input field.</p>
<div class="paragraph">
<p>When you add a field name to the expression, the data mapper adds
that field to the mapping. For example, consider this conditional
expression:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../_images/images/integrating-applications/second-conditional-mapping-expression.png" alt="if(ISEMPTY(lastName)" width="firstName" height="orderId + phone)"></span></p>
</div>
<div class="paragraph">
<p>During execution, if the data mapper determines that the <code>lastName</code>
field is empty, it maps only the <code>firstName</code> field to the target
<code>customerName</code> field.  If the <code>lastName</code> field contains a value, that is,
it is not empty, the data mapper concatenates the values in the
source <code>orderId</code> and <code>phone</code> fields, and inserts the result in
the <code>customerName</code> field.
(This example shows how the logic works, but it is probably not a
useful example because when there is a value in the <code>lastName</code> field,
you most likely want the data mapper to simply perform the
mapping and not map some other value into the target.)</p>
</div>
<div class="paragraph">
<p>For this example, after you complete entering the expression,
the data mapping is:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../_images/images/integrating-applications/second-conditional-mapping.png" alt="lastName" width="firstName" height="orderId"></span></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the conditional expression, if you remove a field name that is in
the mapping that the expression applies to, the data mapper removes that
field from the mapping. In other words, every field name in the mapping
must be in the conditional expression.</p>
</div>
</li>
<li>
<p>If mapping preview fields are not already visible, display them
by clicking <span class="image"><img src="../../../_images/images/tutorials/EditorSettings.png" alt="Editor settings"></span> and then
<strong>Show Mapping Preview</strong>.</p>
</li>
<li>
<p>Enter sample data in the source preview input field(s)
to ensure that the target field or target fields
get(s) the correct value.</p>
</li>
<li>
<p>Optionally, apply transformations to one or more source or target fields
that are in the mapping:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the <strong>Mapping Details</strong> panel, find the field that you want to apply
a transformation to.</p>
</li>
<li>
<p>Just below it, click <strong>Add Transformation</strong>.</p>
</li>
<li>
<p>Click the transformation that you want the data mapper to perform.</p>
</li>
<li>
<p>If needed, specify input parameters.</p>
<div class="paragraph">
<p>For more information, see
<a href="{LinkSyndesisIntegrationGuide}#available-transformations_map">Descriptions of available transformations</a> and
<a href="{LinkSyndesisIntegrationGuide}#about-transformations-on-multiple-source-values_map">About transformations on multiple source values before mapping to one target field</a>.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, in the same mapping presented in this procedure, in the
<strong>Mapping Details</strong> panel, you could apply the <code>Uppercase</code>
 transformation to the <code>firstName</code> field. You can test this by entering
 data in the <code>firstName</code> field&#8217;s preview input field.</p>
</div>
</li>
<li>
<p>Edit the conditional expression as needed to obtain the desired result.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Supported functions in conditional expressions</div>
<ul>
<li>
<p><code>ISEMPTY(<em>source-field-name1</em> [+ <em>source-field-name2</em>])</code></p>
<div class="paragraph">
<p>The result of the <code>ISEMPTY()</code> function is a Boolean value. Specify at least
one argument, which is the name of a source field in the mapping that
you want to apply the condition to. When the specified source field is empty,
the <code>ISEMPTY()</code> function returns true.</p>
</div>
<div class="paragraph">
<p>Optionally, add the + (concatenation) operator with an additional field, for
example:</p>
</div>
<div class="paragraph">
<p><code>ISEMPTY(lastName + firstName)</code></p>
</div>
<div class="paragraph">
<p>This expression evaluates to true if both source fields,
<code>lastName</code> and <code>firstName</code>, are empty.</p>
</div>
<div class="paragraph">
<p>Often, the <code>ISEMPTY()</code> function is the first argument in an <code>IF()</code> function.</p>
</div>
</li>
<li>
<p><code>IF(<em>boolean-expression</em>, <em>then</em>, <em>else</em>)</code></p>
<div class="paragraph">
<p>When <code><em>boolean-expression</em></code> evaluates to true, the data mapper returns <code><em>then</em></code>.
When <code><em>boolean-expression</em></code> evaluates to false, the data mapper returns <code><em>else</em></code>.
All three arguments are required. The last argument can be null,
which means that nothing is mapped when
<code><em>boolean-expression</em></code> evaluates to false.</p>
</div>
<div class="paragraph">
<p>For example, consider the mapping that combines the <code>lastName</code> and <code>firstName</code>
source fields in the target <code>customerName</code> field. You can specify this
conditional expression:</p>
</div>
<div class="paragraph">
<p><code>IF (ISEMPTY(lastName), firstName, lastName + ‘,’ + firstName )</code></p>
</div>
<div class="paragraph">
<p>During execution, the data mapper evaluates the <code>lastName</code> field.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <code>lastName</code> field is empty, that is, <code>ISEMPTY(lastName)</code>
returns true, the data mapper inserts only the <code>firstName</code> value into the
target <code>customerName</code> field.</p>
</li>
<li>
<p>If the <code>lastName</code> field contains a value, that is, <code>ISEMPTY(lastName)</code>
returns false, the data mapper maps the <code>lastName</code> value, followed by a comma,
followed by the <code>firstName</code> value into the target <code>customerName</code> field.</p>
<div class="paragraph">
<p>Now consider the behavior if the third argument in this expression is null:</p>
</div>
<div class="paragraph">
<p><code>IF (ISEMPTY(lastName), firstName, null )</code></p>
</div>
<div class="paragraph">
<p>During execution, the data mapper evaluates the <code>lastName</code> field.</p>
</div>
</li>
<li>
<p>As in the previous example, if the <code>lastName</code> field is empty, that is,
<code>ISEMPTY(lastName)</code> returns true, the data mapper inserts only the
<code>firstName</code> value into the target <code>customerName</code> field.</p>
</li>
<li>
<p>However, when the third argument is null, if the <code>lastName</code> field contains
a value, that is, <code>ISEMPTY(lastName)</code> returns false, the data mapper does
not map anything into the target <code>customerName</code> field.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>LT(x,y)</code> or <code>&lt;(x,y)</code></p>
<div class="paragraph">
<p>The data mapper evaluates <code>x</code> and <code>y</code> and returns the lower value.
Both <code>x</code> and <code>y</code> must be numbers.</p>
</div>
</li>
<li>
<p><code>TOLOWER(string)</code></p>
<div class="paragraph">
<p>The data mapper converts the specified string to lowercase and returns it.</p>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Supported operators in conditional expressions</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Operator</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add numeric values or concatenate string values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract a numeric value from another numeric value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply numeric values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide numeric values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;&amp;</code><br>
And</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return true if both the left and right operands are true.
Each operand must return a Boolean value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>||</code><br>
Or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return true if the left operand is true, or if  the right operand is true, or if both operands are true. Each operand must return a Boolean value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;</code><br>
Greater than</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return true if the left numeric operand is greater than the right numeric operand.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;<br>
Less than</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return true if the left numeric operand is less than the right numeric operand.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>==</code><br>
Equal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return true if the left operand and the right operand are the same.</p></td>
</tr>
</tbody>
</table>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
